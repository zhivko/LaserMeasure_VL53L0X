<html><head>
    <title>Motor controller</title>
	<meta charset="UTF-8">
	<meta http-equiv="cache-control" content="max-age=0">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
	<meta http-equiv="pragma" content="no-cache">
	<script type="text/javascript" src="script.js"></script>
	
<!--<script type="text/javascript" src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>						  -->
<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>    -->
	<script type="text/javascript" src="/canvasjs.min.js"></script> 
	<script type="text/javascript" src="/moment.min.js"></script>	
	<link rel="shortcut icon" href="favicon.ico" />
  </head>
  <body>

    <h1>DOUBLE Motor controller</h1>
	<table border="0">
    <tr><td>cmd</td><td><input id="gCodeCmd1" onkeypress="return keyPress(event);" value="target1=300 target2=300" style="width:150px" type="text">
    <input id="btn1" value="Send" onMouseDown="doSend(document.getElementById('gCodeCmd1'));" type="button" /></td></tr>
	
    <tr><td>cmd</td><td><input id="gCodeCmd2" onkeypress="return keyPress(event);" value="target1=0 target2=0" style="width:150px" type="text">
    <input id="btn2" value="Send" onMouseDown="doSend(document.getElementById('gCodeCmd2'));" type="button" /></td></tr>
	
    <tr><td>pid</td><td><input id="pid" onkeypress="return keyPress(event);" value="p=70.0 i=40.0 d=10.0 f=0 syn=1 synErr=4 ramp=25" style="width:150px" type="text">
    <input id="btn3" value="Send" onMouseDown="doSend(document.getElementById('pid'));" type="button" /></td></tr>

	</table>
	
	<table border="1">
	<tbody>
	<tr><td><input type="checkbox" id="definetop" name="definetop" onMouseDown="handleSearchTop(this);" value="unchecked" />search top</td><td align="center"><a id='stop1_top'></a><br /><object id="gotop 1" data="48px-Gnome-go-top.svg" type="image/svg+xml" id="roseSvg"></object></td><td></td><td align="center"><a id='stop2_top'></a><br><object id="gotop 2" data="48px-Gnome-go-top.svg" type="image/svg+xml" id="roseSvg"></object></td></tr>
	<tr><td></td><td><object id="pwm_m1_left" data="48px-Gnome-go-up.svg" type="image/svg+xml" id="roseSvg"></object></td><td></td><td><object id="pwm_m2_left" data="48px-Gnome-go-up.svg" type="image/svg+xml" id="roseSvg"></object></td></tr>
	<tr><td>encoder</td><td id='encoder1_value'></td><td></td><td id='encoder2_value'></td></tr>
	<tr><td>target</td><td id='target1'></td><td></td><td id='target2'></td></tr>
	<tr><td>output</td><td id='output1'></td><td></td><td id='output2'></td></tr>
	<tr><td>pwm</td><td id='pwm1'></td><td></td><td id='pwm2'></td></tr>
	<tr><td>current</td><td id='an1'></td><td></td><td id='an2'></td></tr>
	<tr><td>out %</td><td><input id="maxPercentOutput1" onkeypress="return keyPress(event);" value="100" style="width:30px" type="text"></td><td></td><td><input id="maxPercentOutput2" onkeypress="return keyPress(event);" value="100" style="width:30px" type="text"></td></tr>
	<tr><td></td><td><object id="pwm_m1_right" data="48px-Gnome-go-down.svg" type="image/svg+xml" id="roseSvg"></object></td><td></td><td><object id="pwm_m2_right" data="48px-Gnome-go-down.svg" type="image/svg+xml" id="roseSvg"></object></td></tr>
	<tr><td><input type="checkbox" id="definebottom" name="definebottom" ononMouseDown="handleSearchBottom(this);" />search bottom</td><td align="center"><object id="gobottom 1" data="48px-Gnome-go-bottom.svg" type="image/svg+xml" id="roseSvg"></object><br><a id='stop1_bottom'/></td><td></td><td align="center"><object id="gobottom 2" data="48px-Gnome-go-bottom.svg" type="image/svg+xml" id="roseSvg"></object><br><a id='stop2_bottom'/></td></tr>
	</tbody></table>
	
<p>
Capacity sense:      <a style="font-family: monospace" id="cap_reading"></a><br>
Capacity sense time: <a style="font-family: monospace" id="cap_read_time_ms"></a><br>
Esp32 free heap: <a id="esp32_heap"></a><br>
Encoder actual difference: <a id="actual_diff"></a><br>
PID regulation data:<br>
<table border="1">
<tr><td><small id="PID1output"></small></td><td><small id="PID2output"></small></td></tr>
</table>
<input type="checkbox" checked="checked" id="enablePID" name="enablePID" onMouseDown="handleEnablePID(this);" value="Bike" />Pid enabled


<div id="chartContainer1" style="height: 300px; width:500px;position:absolute;z-index:10;top:50px;left:300px"></div>
<div id="chartContainer2" style="height: 300px; width:500px;position:absolute;z-index:10;top:370px;left:300px"></div>
<div id="chartContainer3" style="height: 200px; width:500px;position:absolute;z-index:10;top:610px;left:300px"></div>

</p>
    <p>
	<button onMouseDown="doSendCommand('status')" type="button">Status</button> 
	<button onMouseDown="doSendCommand('gdfvdsstatus')" type="button">GDF VDS Status</button> 
	
	<button onMouseDown="doSendCommand('clrflt')" type="button">Clear Fault</button> 
	<button onMouseDown="doSendCommand('scan')" type="button">Scan</button> 
	
	</p><div id="output">
  

</div></body></html>